# JoyKit

[![CI Status](http://img.shields.io/travis/joy-make/JoyKit.svg?style=flat)](https://travis-ci.org/joy-make/JoyKit)
[![Version](https://img.shields.io/cocoapods/v/JoyKit.svg?style=flat)](http://cocoapods.org/pods/JoyKit)
[![License](https://img.shields.io/cocoapods/l/JoyKit.svg?style=flat)](http://cocoapods.org/pods/JoyKit)
[![Platform](https://img.shields.io/cocoapods/p/JoyKit.svg?style=flat)](http://cocoapods.org/pods/JoyKit)

## Example

To run the example project, clone the repo, and run `pod install` from the Example directory first.

## Requirements

## Installation

JoyKit is available through [CocoaPods](http://cocoapods.org). To install
it, simply add the following line to your Podfile:

```ruby
pod 'JoyKit'
```

## Author

joy-make, wanggp@sqbj.com
### [åŠŸèƒ½æè¿°åœ°å€:ğŸ¦†](https://www.jianshu.com/p/7bd5e43c50b3)
```
JoyKit æ˜¯ç¬”è€…å¼€å‘å¹¶ä½¿ç”¨äº†ä¸‰å¹´å¤šçš„UIå¿«é€Ÿå¼€å‘ç»„ä»¶ã€æ—©æ—©å°±å¼€æºäº†ä¸è¿‡ä¸€ç›´æ‡’å¾—å†™æ–‡æ¡£ã€æœ€è¿‘å‡†å¤‡è¡¥ä¸€ä¸‹æ–‡æ¡£ã€æä¾›åŠŸèƒ½å¦‚ä¸‹
```
```
1.Views(æ¨¡å‹é©±åŠ¨ã€é“¾å¼è°ƒç”¨çš„TableViewã€CollectionView)
```
```
2.Router(æ¨¡å—è§£è€¦çš„Routerè·¯ç”±æ¨¡å—ã€æ”¯æŒé¡µé¢è·³è½¬ã€æ•°æ®é€šè®¯ã€æ•°æ®å›è°ƒ)
```
```
3.Views(æ•°æ®é©±åŠ¨æ”¯æŒè‡ªå®šä¹‰å·¥å…·æ çš„PickViewã€DatePickViewã€SegmentView)
```
```
4.Utility(æ‰“ç”µè¯ã€å‘çŸ­ä¿¡ã€å‘é‚®ä»¶ã€è¶…é“¾æ¥çš„å·¥å…·æ¨¡å—)
```
```
5.JoyQRCode(äºŒç»´ç æ‰«ææ¨¡å—)
```
```
6.JoyMediaRecordPlay(å°è§†é¢‘å½•åˆ¶ã€æ’­æ”¾æ¨¡å—)
```
```
7. JoyLocation(é“¾å¼è°ƒç”¨çš„å®šä½æ¨¡å—(åŸºäºåŸç”Ÿçš„çº¯å®šä½ä¸å¸¦UI)
```
```
8.JoyCoreMotion(è¿åŠ¨æ•°æ®ã€é™€èºä»ªæ¨¡å—)
```
```
9.viperè®¾è®¡æ¨¡å¼çš„åŸºç¡€åŠŸèƒ½æ¨¡å—(VCã€Interactorã€Presenterã€Routerã€Model)
```
```
10.CellsLibruary(å¸¸ç”¨çš„15ç§æ”¯æŒè‡ªå®šä¹‰çš„åˆ—è¡¨cell)
```
```
11.Category(å¸¸ç”¨categoryæ¨¡å— å¿«é€Ÿæ’­æ”¾éŸ³é¢‘æ–‡ä»¶ã€7ç§CAAnimationåŠ¨ç”»ã€åŸºäºCALayerçš„è½¬åœºåŠ¨ç”»ã€NSArray/NSDictionaryé˜²Crashä»¥åŠæ•°åç§åŠŸèƒ½æ‰©å±•ã€NSDateå¸¸ç”¨è®¡ç®—åŠŸèƒ½æ‰©å±•ã€NSObjectæ–¹æ³•æ›¿æ¢åŠæ–¹æ³•æ˜ å°„ã€NSStringå¸¸ç”¨åŠŸèƒ½æ‰©å±•ã€UIButtonè‡ªå®šä¹‰ç‚¹å‡»åŒºåŸŸæ‰©å±•ã€UIColorå„ç§è‰²çº¸è½¬æ¢æ–¹å¼æ‰©å±•ã€UIImageæˆªå±/äºŒç»´ç ç”Ÿæˆ/è£å‰ª/å˜è‰²/å­˜ç›¸å†Œç­‰å¿«æ·æ‰©å±•ã€UITextFieldè®¾ç½®æœ€å¤§å­—æ•°ä»¥åŠè¶…é™æç¤ºè¯­ã€UIViewå¸¸ç”¨ä½ç§»/ç”Ÿæˆå›¾ç‰‡ç­‰ã€UIWindowäº®å±ç›‘å¬ç­‰)
```
```
12.å¸¸ç”¨å®å®šä¹‰ã€å¸¸ç”¨ç±»å‹çš„Blockå®šä¹‰
```
[åŠŸèƒ½ä¸€è®²è§£(é€šè¿‡æœ¬åœ°æˆ–æœåŠ¡ç«¯jsoné…ç½®é¡µé¢UI)]()
![jsoné…ç½®TableUI](https://upload-images.jianshu.io/upload_images/1488115-55b7a60c0bc42901.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300)

##### PersonInteractoræ•°æ®æº(è¯»å–jsonæ•°æ®æºç”ŸæˆTableå¯è¯†åˆ«çš„æ•°æ®æº(),jsonæ–‡ä»¶å¯é…ç½®cellæ ·å¼ã€cellå†…ã€cellçš„äº‹ä»¶)

```
@interface PersonInteractor : JoyInteractorBase
@property (nonatomic,strong)NSMutableArray *dataArrayM;
- (void)getPersonList:(VOIDBLOCK)success;
@end
```
```

@implementation JoyInteractorBase
-(NSMutableArray *)dataArrayM{
    return _dataArrayM = _dataArrayM?:[NSMutableArray array];
}
```
```
- (void)getConfigData{
    JoySectionBaseModel *sectionModel = [JoySectionBaseModel sectionWithHeaderModel:nil footerModel:nil cellModels:nil sectionH:0 sectionTitle:@""];
    NSArray *data = (NSArray *)[[self readLocalFileWithName:@"personDetail"] objectForKey:@"style"];
    for (NSDictionary *dict in data) {
        JoyCellBaseModel *cellModel = [JoyCellBaseModel initWithStyle:[dict[@"style"] integerValue] obj:dict];
        if(cellModel.changeKey){
            [cellModel isMemberOfClass:JoyCellBaseModel.class]? cellModel.subTitle = [self.person valueForKey:cellModel.changeKey]:nil;
            [cellModel isMemberOfClass:JoyTextCellBaseModel.class]? cellModel.subTitle = [self.person valueForKey:cellModel.changeKey]:nil;
            [cellModel isMemberOfClass:JoySwitchCellBaseModel.class]?((JoySwitchCellBaseModel*)cellModel).on = [[self.person valueForKey:cellModel.changeKey] boolValue]:nil;
            [cellModel isMemberOfClass:JoyImageCellBaseModel.class]?((JoyImageCellBaseModel*)cellModel).avatar = [self.person valueForKey:cellModel.changeKey]:nil;
        }
        cellModel.titleColor = @"#347AEB";
        cellModel.subTitleColor = @"#CCCCCC";
        [self.dataArrayM addObject:cellModel];
    }
}
```
```
- (NSDictionary *)readLocalFileWithName:(NSString *)name {
    // è·å–æ–‡ä»¶è·¯å¾„
    NSString *path = [[NSBundle mainBundle] pathForResource:name ofType:@"json"];
    // å°†æ–‡ä»¶æ•°æ®åŒ–
    NSData *data = [[NSData alloc] initWithContentsOfFile:path];
    // å¯¹æ•°æ®è¿›è¡ŒJSONæ ¼å¼åŒ–å¹¶è¿”å›å­—å…¸å½¢å¼
    return [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
}
@end

```

##### VCä»£ç 
```
@interface SCViewController ()
@property (nonatomic,strong)JoyTableAutoLayoutView *tableView;
@property (nonatomic,strong)PersonInteractor *interactor;
@end
```
```
@implementation SCViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self addSubViews];
    [self reloadDataSource];
}

- (void)addSubViews{
    [self setDefaultConstraintWithView:self.tableView andTitle:@"æµ‹è¯•"];//setDefaultConstraintWithViewè‡ªå¸¦çº¦æŸä¸éœ€è¦è®¾ç½®tableViewçš„frame
}
```
```
-(void)reloadDataSource{
  è·å–Interactorä¸­çš„æ•°æ®æºdataArrayM
  self.tableView.setDataSource(self.interactor.dataArrayM).reloadTable()å³å¯åˆ·æ–°é¡µé¢äº†
  è‹¥éœ€è¦å®ç°cellä¸Šçš„äº‹ä»¶å¯ä»¥ä½¿ç”¨Tableçš„é“¾å¼å›è°ƒself.tableView.setDataSource(self.interactor.dataArrayM).reloadTable();
}
```
```
-(JoyTableAutoLayoutView *)tableView{
    return _tableView = _tableView?:[[JoyTableAutoLayoutView alloc]init];
}
```
```
-(PersonInteractor *)interactor{
    return _interactor = _interactor?:[[PersonInteractor alloc]init];
}
```

  è‹¥éœ€è¦å®ç°cellä¸Šçš„äº‹ä»¶å¯ä»¥ä½¿ç”¨Tableçš„é“¾å¼å›è°ƒ
```
self.tableView.cellTextEiditEnd(^(NSIndexPath *indexPath, NSString *content, NSString *key) {
        key?[weakSelf.interactor.person setValue:content forKey:key]:nil;
    })
    .cellDidSelect(^(NSIndexPath *indexPath, NSString *tapAction) {
        [weakSelf performTapAction:tapAction];//å¦‚jsonä¸­é…ç½®æŸä¸€è¡ŒtapActionä¸º@â€œgoNextPageâ€,é‚£ä¹ˆç›´æ¥åœ¨.mä¸­å®ç°-(void) goNextPage å³å¯
    })
    .cellEiditAction(^(UITableViewCellEditingStyle editingStyle,NSIndexPath *indexPath) {
        [JoyAlert showWithMessage:@"ç¼–è¾‘äº‹ä»¶"];
    })
    .cellMoveAction(^(NSIndexPath *sourceIndexPath,NSIndexPath *toIndexPath){
        [JoyAlert showWithMessage:@"æŒªç§»äº‹ä»¶"];
    })
    .cellTextCharacterHasChanged(^(NSIndexPath *indexPath, NSString *content, NSString *key){
        //æ–‡æœ¬å­—ç¬¦å‘ç”Ÿå˜åŒ–ã€å¼€å…³æŒ‰é’®ç­‰
      å¦‚personå¯¹è±¡çš„keyä¸ºage
         [self. person setValue: content  forKey: key]
    });;
```

##### [åŠŸèƒ½äºŒè®²è§£(è‡ªå®šä¹‰cellæ€ä¹ˆå’ŒJoyTableAutoLayoutViewé…å¥—ä½¿ç”¨)]()
å¾…è¡¥å……
##### [åŠŸèƒ½ä¸‰è®²è§£(JoyRouterè·¯ç”±)]()
å¾…è¡¥å……
##### [åŠŸèƒ½.......è®²è§£(......)]()
å¾…è¡¥å……
## License

JoyKit is available under the MIT license. See the LICENSE file for more info.
